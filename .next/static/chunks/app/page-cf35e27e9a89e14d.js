(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5047:function(e,t,s){Promise.resolve().then(s.bind(s,8532))},8532:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return eL}});var a=s(7437),n=s(2265),r=s(7053),l=s(535),i=s(1994),o=s(3335);function c(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,o.m6)((0,i.W)(t))}let d=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function m(e){let{className:t,variant:s,size:n,asChild:l=!1,...i}=e,o=l?r.g7:"button";return(0,a.jsx)(o,{"data-slot":"button",className:c(d({variant:s,size:n,className:t})),...i})}function u(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:c("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function x(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:c("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function f(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:c("leading-none font-semibold",t),...s})}function g(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:c("text-muted-foreground text-sm",t),...s})}function p(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:c("px-6",t),...s})}let h=(0,l.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function v(e){let{className:t,variant:s,asChild:n=!1,...l}=e,i=n?r.g7:"span";return(0,a.jsx)(i,{"data-slot":"badge",className:c(h({variant:s}),t),...l})}var b=s(1671),j=s(7689),N=s(8736),y=s(1817),w=s(8930);let S=[{type:"business",label:"\uD83D\uDCCB Business Requirements",friendlyName:"Main Documentation",description:"Upload your primary business requirements document",helpText:"This is your main specification document that describes what needs to be tested",color:"bg-purple-100 text-purple-800",icon:"\uD83D\uDCCB",examples:"Business requirements, specifications, workflows",required:!0},{type:"detail-api",label:"\uD83D\uDD27 Technical Specifications",friendlyName:"API Documentation",description:"Upload detailed technical API specifications",helpText:"Upload API documentation that shows endpoints, parameters, and responses",color:"bg-blue-100 text-blue-800",icon:"\uD83D\uDD27",examples:"API specifications, endpoints, detailed documentation",required:!0},{type:"api-integration",label:"\uD83D\uDD17 Integration Guides",friendlyName:"System Integration",description:"Upload API integration documents (optional - multiple files allowed)",helpText:"Additional integration documentation - you can upload multiple files here",color:"bg-green-100 text-green-800",icon:"\uD83D\uDD17",examples:"Integration guides, API connections, system integration docs",required:!1,allowMultiple:!0}],C=[{type:"validation",label:"✅ Validation Document",friendlyName:"Validation Document",description:"Upload a single document for validation test case generation",helpText:"Any document that contains validation rules or data structures to test",color:"bg-orange-100 text-orange-800",icon:"✅",examples:"Any document for validation testing",required:!0}];function k(e){let{onFilesUploaded:t,onNext:s,onBack:r,uploadedFiles:l,selectedStream:i,onDeleteFile:o}=e,[d,h]=(0,n.useState)(null),[k,D]=(0,n.useState)(null),[I,T]=(0,n.useState)({}),E=(0,n.useCallback)((e,t)=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?h(t||null):"dragleave"===e.type&&h(null)},[]),B=(0,n.useCallback)((e,t)=>{e.preventDefault(),e.stopPropagation(),h(null),P(Array.from(e.dataTransfer.files),t)},[]),R=(e,t)=>{P(Array.from(e.target.files||[]),t)},P=async(e,s)=>{if("validation"===i&&(l.length>0||e.length>1)){alert("Validation stream only allows one file. Please remove existing files first.");return}if("business"===i&&"api-integration"!==s&&(l.filter(e=>e.type===s).length>0||e.length>1)){alert("Only one ".concat(s," file is allowed. Please remove the existing file first."));return}let a=[];for(let t of e){let e=await A(t);a.push({id:"".concat(Date.now(),"-").concat(Math.random()),name:t.name,type:s,content:e})}let n=new Map(l.map(e=>[e.id,e]));t([..."api-integration"===s?l:l.filter(e=>e.type!==s),...a].map(e=>{let t=n.get(e.id);return(null==t?void 0:t.convertedContent)?{...e,convertedContent:t.convertedContent}:e}))},A=e=>new Promise((t,s)=>{let a=new FileReader;a.onload=e=>{var s;return t(null===(s=e.target)||void 0===s?void 0:s.result)},a.onerror=s,a.readAsText(e)}),F=async e=>{let s=l.filter(t=>t.type===e);if(0===s.length)return;let a="Are you sure you want to remove all ".concat(s.length," ").concat(e," file").concat(s.length>1?"s":"","?");window.confirm(a)&&t(l.filter(t=>t.type!==e))},Z=async(e,t)=>{if(window.confirm('Are you sure you want to remove "'.concat(t,'"?'))){D(e);try{await new Promise(e=>setTimeout(e,300)),o(e)}finally{D(null)}}},O=e=>l.filter(t=>t.type===e);return(0,a.jsxs)(u,{children:[(0,a.jsxs)(x,{children:[(0,a.jsx)(f,{children:"Upload HTML Documents"}),(0,a.jsx)(g,{children:"validation"===i?"Upload a single HTML document for validation test case generation.":"business"===i?"Upload HTML documents for business test case generation. Business and Detail API documents are required, API Integration documents are optional.":"Upload your documents for test case generation. Choose the correct category for each type of document to optimize test case quality."})]}),(0,a.jsxs)(p,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"\uD83D\uDCCB File Categories Guide"}),(0,a.jsx)("div",{className:"grid gap-2 text-sm",children:"business"===i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-purple-800",children:"\uD83D\uDCCB Business Document:"})," Business requirements, specifications, and workflows"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-blue-800",children:"\uD83D\uDD27 Detail API:"})," Detailed API documentation and specifications"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-green-800",children:"� API Integration:"})," Integration guides and API connection documents (multiple files allowed)"]})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-orange-800",children:"✅ Validation Document:"})," Any single document for validation test case generation"]})})]}),(0,a.jsx)("div",{className:"grid gap-4 ".concat("validation"===i?"md:grid-cols-1 max-w-md mx-auto":"md:grid-cols-3"),children:("validation"===i?C:S).map(e=>{let t=O(e.type),s=t.length>0;return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:c("relative border-2 border-dashed rounded-lg p-6 text-center transition-colors cursor-pointer min-h-[200px] flex flex-col justify-center",d===e.type?"border-primary bg-primary/5":"border-border",s?"border-green-500 bg-green-50":"hover:border-primary/50 hover:bg-primary/5"),onDragEnter:t=>E(t,e.type),onDragLeave:E,onDragOver:t=>E(t,e.type),onDrop:t=>B(t,e.type),onClick:()=>{var t;return null===(t=document.getElementById("file-input-".concat(e.type)))||void 0===t?void 0:t.click()},children:[s?(0,a.jsx)(b.Z,{className:"mx-auto h-8 w-8 text-green-600 mb-2"}):(0,a.jsx)(j.Z,{className:"mx-auto h-8 w-8 text-muted-foreground mb-2"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:e.icon}),(0,a.jsx)("p",{className:"font-medium",children:e.label})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground italic",children:["Examples: ",e.examples]}),s&&(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsxs)(v,{variant:"secondary",className:"bg-green-100 text-green-800",children:[t.length," file",t.length>1?"s":""," uploaded"]}),(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:t=>{t.preventDefault(),t.stopPropagation(),F(e.type)},className:"hover:bg-destructive/10 hover:text-destructive text-xs h-6 px-2",title:"Clear all ".concat(e.label," files"),children:"Clear All"})]})]})]}),(0,a.jsx)("input",{id:"file-input-".concat(e.type),type:"file",multiple:"business"===i&&"api-integration"===e.type,accept:".html,.htm",onChange:t=>R(t,e.type),className:"hidden"}),t.length>0&&(0,a.jsx)("div",{className:"space-y-2",children:t.map(e=>{let t=k===e.id;return(0,a.jsxs)("div",{className:c("flex items-start justify-between p-2 bg-muted rounded text-sm transition-opacity gap-2",t&&"opacity-50"),children:[(0,a.jsxs)("div",{className:"flex items-start space-x-2 min-w-0 flex-1",children:[(0,a.jsx)(N.Z,{className:"h-4 w-4 text-muted-foreground mt-0.5 flex-shrink-0"}),(0,a.jsx)("span",{className:"break-words leading-5",children:e.name})]}),(0,a.jsx)(m,{variant:"ghost",size:"sm",disabled:t,onClick:t=>{t.preventDefault(),t.stopPropagation(),Z(e.id,e.name)},className:"hover:bg-destructive/10 hover:text-destructive h-6 w-6 p-0 flex-shrink-0",title:"Remove ".concat(e.name),"aria-label":"Remove ".concat(e.name),children:t?(0,a.jsx)(y.Z,{className:"h-3 w-3 animate-spin"}):(0,a.jsx)(w.Z,{className:"h-3 w-3"})})]},e.id)})})]},e.type)})}),l.length>0&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(m,{variant:"ghost",size:"sm",onClick:()=>{window.confirm("Are you sure you want to remove all ".concat(l.length," uploaded files?"))&&t([])},className:"hover:bg-destructive/10 hover:text-destructive text-sm",children:["Clear All Files (",l.length,")"]})}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(m,{variant:"outline",onClick:()=>{console.log("[v0] Back button clicked"),r()},children:"Back"}),(0,a.jsx)(m,{onClick:s,disabled:0===l.length,className:"min-w-32",children:0===l.length?"No Files to Convert":"Convert ".concat(l.length," File").concat(l.length>1?"s":"")})]})]})]})}var D=s(9322),I=s(2208),T=s(7168),E=s(2489);function B(e,t){let[s,a]=(0,n.useState)(()=>{try{let s=window.localStorage.getItem(e);return s?JSON.parse(s):t}catch(t){console.error('Error reading localStorage key "'.concat(e,'":'),t)}return t});return(0,n.useEffect)(()=>{try{let t=window.localStorage.getItem(e);if(t){let e=JSON.parse(t);a(e)}}catch(t){console.error('Error reading localStorage key "'.concat(e,'":'),t)}},[e]),[s,t=>{try{let n=t instanceof Function?t(s):t;a(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(t){console.error('Error setting localStorage key "'.concat(e,'":'),t)}}]}var R=s(1355);function P(e){let{className:t,...s}=e;return(0,a.jsx)(R.fC,{"data-slot":"tabs",className:c("flex flex-col gap-2",t),...s})}function A(e){let{className:t,...s}=e;return(0,a.jsx)(R.aV,{"data-slot":"tabs-list",className:c("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...s})}function F(e){let{className:t,...s}=e;return(0,a.jsx)(R.xz,{"data-slot":"tabs-trigger",className:c("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function Z(e){let{className:t,...s}=e;return(0,a.jsx)(R.VY,{"data-slot":"tabs-content",className:c("flex-1 outline-none",t),...s})}var O=s(4440),z=s(7970);function M(e){let{selectedFileData:t,fileTypeLabels:s,getConvertedContent:n,onRegenerate:r,isConverting:l,onClose:i}=e;return(0,a.jsx)("div",{className:"h-full w-full fixed inset-0 z-50 bg-background",children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b bg-background",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",title:t.name,children:t.name}),(0,a.jsx)(v,{variant:"outline",children:s[t.type]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(m,{variant:"outline",size:"sm",onClick:()=>r(t.id),disabled:l,children:[l?(0,a.jsx)(y.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(T.Z,{className:"mr-2 h-4 w-4"}),"Regenerate"]}),(0,a.jsxs)(m,{variant:"outline",size:"sm",onClick:i,children:[(0,a.jsx)(O.Z,{className:"h-4 w-4 mr-2"}),"Exit Fullscreen"]})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-hidden overflow-y-auto overflow-x-auto scroll-container",children:(0,a.jsxs)(P,{defaultValue:"preview",className:"h-full flex flex-col",children:[(0,a.jsxs)(A,{className:"mx-4 mt-4 grid w-fit grid-cols-2 h-12",children:[(0,a.jsx)(F,{value:"preview",className:"text-base px-6",children:"Preview Markdown"}),(0,a.jsx)(F,{value:"converted",className:"text-base px-6",children:"Raw Markdown"})]}),(0,a.jsx)(Z,{value:"preview",className:"flex-1 mx-4 mb-4 mt-2",children:(0,a.jsx)("div",{className:"h-full w-full border rounded-lg bg-background shadow-sm overflow-y-auto overflow-x-auto scroll-container",children:(0,a.jsx)("div",{className:"p-8 min-w-0",children:(0,a.jsx)("div",{className:"text-base leading-relaxed markdown-content",style:{minWidth:"1000px",width:"max-content"},dangerouslySetInnerHTML:{__html:function(e){try{return(0,z.TU)(e)}catch(e){return console.error("Error parsing markdown:",e),'<p class="text-destructive">Error parsing markdown content</p>'}}(n(t.id))}})})})}),(0,a.jsx)(Z,{value:"converted",className:"flex-1 mx-4 mb-4 mt-2",children:(0,a.jsx)("div",{className:"h-full w-full border rounded-lg bg-muted/10 overflow-y-auto overflow-x-auto scroll-container",children:(0,a.jsx)("div",{className:"p-8",children:(0,a.jsx)("pre",{className:"text-sm whitespace-pre font-mono leading-relaxed text-muted-foreground",style:{minWidth:"1000px"},children:n(t.id)})})})})]})})]})})}z.TU.setOptions({breaks:!0,gfm:!0});var U=s(7416);function L(e){let{selectedFileData:t,getConvertedContent:s,onRegenerate:n,onFullscreen:r,isConverting:l}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-muted/30 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold truncate pr-4",title:t.name,children:t.name}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(m,{variant:"outline",size:"sm",onClick:r,className:"flex-shrink-0",children:[(0,a.jsx)(U.Z,{className:"mr-2 h-4 w-4"}),"Fullscreen"]}),(0,a.jsxs)(m,{variant:"outline",size:"sm",onClick:()=>n(t.id),disabled:l,className:"flex-shrink-0",children:[l?(0,a.jsx)(y.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(T.Z,{className:"mr-2 h-4 w-4"}),"Regenerate"]})]})]}),(0,a.jsxs)(P,{defaultValue:"preview",className:"w-full",children:[(0,a.jsxs)(A,{className:"grid w-full grid-cols-2 h-12",children:[(0,a.jsx)(F,{value:"preview",className:"text-base",children:"Preview Markdown"}),(0,a.jsx)(F,{value:"converted",className:"text-base",children:"Raw Markdown"})]}),(0,a.jsx)(Z,{value:"preview",className:"mt-6",children:(0,a.jsx)("div",{className:"h-[600px] w-full border rounded-lg bg-background shadow-sm overflow-auto",children:(0,a.jsx)("div",{className:"p-6 max-w-none",children:(0,a.jsx)("div",{className:"markdown-content prose prose-slate max-w-none",dangerouslySetInnerHTML:{__html:function(e){try{return(0,z.TU)(e)}catch(e){return console.error("Error parsing markdown:",e),'<p class="text-destructive">Error parsing markdown content</p>'}}(s(t.id))}})})})}),(0,a.jsx)(Z,{value:"converted",className:"mt-6",children:(0,a.jsx)("div",{className:"h-[600px] w-full border rounded-lg bg-muted/10 overflow-x-auto overflow-y-auto scroll-container",children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("pre",{className:"text-sm whitespace-pre font-mono leading-relaxed text-muted-foreground min-w-max",style:{minWidth:"800px"},children:s(t.id)})})})})]})]})}z.TU.setOptions({breaks:!0,gfm:!0});let V="dev-mode-enabled",G=()=>"true"===localStorage.getItem(V),H=e=>{localStorage.setItem(V,e.toString())},q=()=>{let e=!G();return H(e),e},J=(e,t,s)=>"# Converted ".concat(e,"\n\nThis is a mock conversion result for **development testing**.\n\n## File Information\n- **Original file:** ").concat(e,"\n- **File type:** ").concat(t,"\n- **Stream:** ").concat(s,"\n- **Generated:** ").concat(new Date().toISOString(),'\n\n## Mock Content\n\n### Test Scenarios\n\n| Test Case ID | Description | Input | Expected Output | Priority |\n|-------------|-------------|--------|-----------------|----------|\n| TC001 | Valid input test | Sample input data | Success response | High |\n| TC002 | Invalid input test | Invalid data | Error response | Medium |\n| TC003 | Edge case test | Boundary values | Handled gracefully | Low |\n\n### API Endpoints\n\n```json\n{\n  "endpoint": "/api/test",\n  "method": "POST",\n  "headers": {\n    "Content-Type": "application/json"\n  },\n  "body": {\n    "testData": "sample"\n  }\n}\n```\n\n### Expected Results\n\nThis mock content simulates the actual conversion process but allows for testing without making API calls to the conversion service.\n\n---\n*Generated in development mode for testing purposes*'),_=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise(t=>setTimeout(t,e))};function W(e){var t;let{uploadedFiles:s,isConverting:r,setIsConverting:l,onConvert:i,onBack:o,selectedStream:c,onDeleteFile:d,onRegenerate:h,onUpdateFiles:S,onNavigateToStep:C}=e,[k,R]=(0,n.useState)((null===(t=s[0])||void 0===t?void 0:t.id)||""),[P,A]=(0,n.useState)(null),[F,Z]=(0,n.useState)(!1),O=(0,n.useRef)(!1),z=(0,n.useRef)(!1),[U,V]=B("conversion-data-".concat(c),{statuses:[],currentIndex:0}),{conversionStatuses:H,setConversionStatuses:q,currentFileIndex:W,handleCancelConversion:Y,handleConvertAllFiles:K,abortControllerRef:$}=function(e,t,s,a){let[r,l]=(0,n.useState)([]),[i,o]=(0,n.useState)(0),c=(0,n.useRef)(null),d=(0,n.useRef)(!1),m=(0,n.useCallback)(()=>{d.current=!0,c.current&&(c.current.abort(),c.current=null),s(!1);let t=e[i];t&&l(e=>e.map(e=>e.fileId===t.id?{...e,status:"pending",error:void 0}:e))},[i,e,s]),u=(0,n.useCallback)(async()=>{if(0!==e.length){s(!0),d.current=!1,l(e=>e.map(e=>({...e,status:"pending",error:void 0})));for(let s=0;s<e.length&&!d.current;s++){let a=e[s];o(s),l(e=>e.map(e=>e.fileId===a.id?{...e,status:"converting"}:e));try{c.current=new AbortController;let e="Conversion completed";if(G())console.log("\uD83D\uDE80 Dev Mode: Mocking conversion for ".concat(a.name)),await _(800),e=J(a.name,a.type,t||"unknown");else{let s=await fetch("https://testcase-gen.app.n8n.cloud:5678/webhook/html-to-md",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:a.content,fileName:a.name,fileType:a.type,stream:t}),signal:c.current.signal});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));let n=await s.json();if("success"===n.status&&n.files&&n.files.length>0){let t=n.files[0].data;if(t)try{let s=atob(t),a=new Uint8Array(s.length);for(let e=0;e<s.length;e++)a[e]=s.charCodeAt(e);e=new TextDecoder("utf-8").decode(a)}catch(s){console.error("Base64 decode error:",s),e=t}else e="No content received"}else e=J(a.name,a.type,t||"unknown")}if(d.current)break;l(s=>{let n=s.map(t=>t.fileId===a.id?{...t,status:"completed",markdownResult:e}:t);return localStorage.setItem("conversion-statuses-".concat(t),JSON.stringify(n)),n}),await new Promise(e=>setTimeout(e,500))}catch(e){if(console.error("Conversion failed for:",a.name,e),e instanceof Error&&"AbortError"===e.name){console.log("Conversion was cancelled");break}l(t=>t.map(t=>t.fileId===a.id?{...t,status:"error",error:e instanceof Error?e.message:"Unknown error"}:t))}}s(!1),c.current=null,d.current=!1,setTimeout(()=>{a(e.map(e=>{let t=r.find(t=>t.fileId===e.id);return t&&"completed"===t.status&&t.markdownResult?{...e,convertedContent:t.markdownResult}:e}))},100)}},[e,t,s,r,a]);return{conversionStatuses:r,setConversionStatuses:l,currentFileIndex:i,setCurrentFileIndex:o,handleCancelConversion:m,handleConvertAllFiles:u,abortControllerRef:c}}(s,c,l,S);(0,n.useEffect)(()=>{if(!z.current){z.current=!0,O.current=!0;let e=s.map(e=>U.statuses.find(t=>t.fileId===e.id)||{fileId:e.id,status:"pending"});e.length>0&&q(e);return}let e=new Set(H.map(e=>e.fileId));(s.some(t=>!e.has(t.id))||H.some(e=>!s.find(t=>t.id===e.fileId)))&&q(e=>s.map(t=>e.find(e=>e.fileId===t.id)||U.statuses.find(e=>e.fileId===t.id)||{fileId:t.id,status:"pending"}))},[s.length,U]),(0,n.useEffect)(()=>{if(c&&s.length>0&&U.statuses.length>0){let e=setTimeout(()=>{let e=s.map(e=>U.statuses.find(t=>t.fileId===e.id)||{fileId:e.id,status:"pending"});e.some((e,t)=>{let s=H[t];return!s||s.status!==e.status||s.markdownResult!==e.markdownResult})&&q(e)},50);return()=>clearTimeout(e)}},[c,s.length,U.statuses.length]),(0,n.useEffect)(()=>{if(k&&!s.find(e=>e.id===k)){var e;R((null===(e=s[0])||void 0===e?void 0:e.id)||"")}},[s,k]),(0,n.useEffect)(()=>{if(!O.current)return;let e=setTimeout(()=>{V({statuses:H,currentIndex:W})},100);return()=>clearTimeout(e)},[H,W,V]),(0,n.useEffect)(()=>()=>{$.current&&($.current.abort(),$.current=null)},[]);let Q={business:"\uD83D\uDCCB Business Requirements","detail-api":"\uD83D\uDD27 Technical Specifications","api-integration":"\uD83D\uDD17 Integration Guides",validation:"✅ Validation Document",error:"❌ Error"},X=s.find(e=>e.id===k),ee=e=>{let t=H.find(t=>t.fileId===e);return(null==t?void 0:t.markdownResult)||"No converted content available from conversion step"},et=()=>s.some(e=>{let t=H.find(t=>t.fileId===e.id);return(null==t?void 0:t.status)==="completed"&&t.markdownResult}),es=e=>{switch(e){case"pending":return(0,a.jsx)(N.Z,{className:"h-5 w-5 text-muted-foreground"});case"converting":return(0,a.jsx)(y.Z,{className:"h-5 w-5 animate-spin text-primary"});case"completed":return(0,a.jsx)(b.Z,{className:"h-5 w-5 text-green-600"});case"error":return(0,a.jsx)(D.Z,{className:"h-5 w-5 text-red-600"})}},ea=e=>{switch(e){case"pending":return"bg-gray-100 text-gray-800";case"converting":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"error":return"bg-red-100 text-red-800"}};s[W];let en=H.every(e=>"completed"===e.status);return F&&X?(0,a.jsx)(M,{selectedFileData:X,fileTypeLabels:Q,getConvertedContent:ee,onRegenerate:h,isConverting:r,onClose:()=>Z(!1)}):P?(0,a.jsxs)(u,{children:[(0,a.jsxs)(x,{children:[(0,a.jsx)(f,{children:"Converted Markdown Result"}),(0,a.jsx)(g,{children:"Review the converted markdown content"})]}),(0,a.jsxs)(p,{className:"space-y-4",children:[(0,a.jsx)("div",{className:"max-h-96 overflow-y-auto p-4 bg-gray-50 rounded-lg border",children:(0,a.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,a.jsx)("pre",{className:"whitespace-pre-wrap text-sm font-mono leading-relaxed",children:P})})}),(0,a.jsx)("div",{className:"flex justify-between",children:(0,a.jsx)(m,{variant:"outline",onClick:()=>A(null),children:"Back to Conversion & Review"})})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(u,{children:[(0,a.jsxs)(x,{children:[(0,a.jsx)(f,{children:"Convert to Markdown"}),(0,a.jsxs)(g,{children:["Ready to convert your uploaded HTML files to Markdown format for ",c,' test case generation. Click "Convert All Files" to start the conversion process.',r&&" Converting file ".concat(W+1," of ").concat(s.length,"...")]})]}),(0,a.jsxs)(p,{className:"space-y-6",children:[c&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-accent/10 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(v,{variant:"secondary",className:"business"===c?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800",children:[c.charAt(0).toUpperCase()+c.slice(1)," Stream"]}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:r?"Converting files...":"Ready for manual conversion"})]}),G()&&(0,a.jsx)(v,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:"\uD83D\uDE80 Mock APIs"})]}),0===s.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(N.Z,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"No Files Uploaded"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Go back to upload some files before proceeding with conversion."})]}):(0,a.jsx)("div",{className:"grid gap-3",children:s.map((e,t)=>{let s=H.find(t=>t.fileId===e.id),n=t===W;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg ".concat(n?"border-blue-300 bg-blue-50":""),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[es((null==s?void 0:s.status)||"pending"),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("p",{className:"font-medium truncate",title:e.name,children:e.name}),(0,a.jsx)(v,{variant:"outline",children:Q[e.type]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(v,{variant:"secondary",className:ea((null==s?void 0:s.status)||"pending"),children:(null==s?void 0:s.status)||"pending"}),(null==s?void 0:s.status)==="completed"&&(0,a.jsxs)(m,{variant:"outline",size:"sm",onClick:()=>A(s.markdownResult||""),children:[(0,a.jsx)(I.Z,{className:"h-4 w-4 mr-1"}),"View"]}),(0,a.jsx)(m,{variant:"outline",size:"sm",onClick:()=>d(e.id),className:"hover:bg-destructive/10 hover:text-destructive",disabled:r&&(null==s?void 0:s.status)==="converting",children:(0,a.jsx)(w.Z,{className:"h-4 w-4"})})]})]},e.id)})})]})]}),et()&&(0,a.jsxs)(u,{className:"border-2 border-primary/20",children:[(0,a.jsxs)(x,{className:"pb-4",children:[(0,a.jsx)(f,{className:"text-xl",children:"Review Converted Files"}),(0,a.jsxs)(g,{className:"text-base",children:["Review the converted Markdown files for ",c," test case generation. If any file doesn't look correct, you can regenerate it."]})]}),(0,a.jsxs)(p,{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-5 gap-6",children:[(0,a.jsxs)("div",{className:"xl:col-span-1 space-y-3",children:[(0,a.jsx)("h3",{className:"font-medium",children:"Converted Files"}),(0,a.jsx)("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:s.filter(e=>{let t=H.find(t=>t.fileId===e.id);return(null==t?void 0:t.status)==="completed"}).map(e=>(0,a.jsx)("div",{className:"p-3 border rounded-lg transition-colors ".concat(k===e.id?"border-primary bg-primary/5":"hover:bg-muted"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer flex-1 min-w-0",onClick:()=>R(e.id),children:[(0,a.jsx)(N.Z,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),(0,a.jsx)(v,{variant:"outline",className:"text-xs",children:Q[e.type]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),h(e.id)},disabled:r,className:"hover:bg-blue/10 hover:text-blue h-6 w-6 p-0",children:(0,a.jsx)(T.Z,{className:"h-3 w-3"})})]})]})},e.id))})]}),(0,a.jsx)("div",{className:"xl:col-span-4",children:X&&"No converted content available from conversion step"!==ee(X.id)&&(0,a.jsx)(L,{selectedFileData:X,getConvertedContent:ee,onRegenerate:h,onFullscreen:()=>Z(!0),isConverting:r})})]}),(0,a.jsx)("div",{className:"border-t pt-8 mt-8",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6 p-4 bg-green-50 rounded-lg",children:[(0,a.jsx)(b.Z,{className:"h-6 w-6 text-green-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-green-800",children:"Are the files correct and match your documents?"}),(0,a.jsx)("p",{className:"text-sm text-green-700 mt-1",children:'Please review each converted file to ensure the content is accurate. If any file needs adjustment, use the "Regenerate" button to convert it again.'})]})]})})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-6 border-t",children:[(0,a.jsx)(m,{variant:"outline",onClick:o,disabled:r,size:"lg",children:"Back"}),(0,a.jsx)("div",{className:"space-x-3",children:0===s.length?(0,a.jsx)(m,{disabled:!0,size:"lg",className:"min-w-48",children:"No Files to Convert"}):en?(0,a.jsxs)(a.Fragment,{children:[et()&&(0,a.jsxs)(m,{variant:"outline",onClick:()=>{let e=s.filter(e=>{let t=H.find(t=>t.fileId===e.id);return(null==t?void 0:t.status)==="completed"&&t.markdownResult});if(0===e.length){alert("No converted files available to upload. Please convert files first.");return}let t=[...e.map(e=>{let t=H.find(t=>t.fileId===e.id),s=e.name.replace(/\.[^/.]+$/,"");return{id:"".concat(e.id,"-").concat(Date.now()),fileName:"".concat(s,".md"),content:(null==t?void 0:t.markdownResult)||"",timestamp:Date.now(),type:e.type}}),...JSON.parse(localStorage.getItem("conversion-history")||"[]")];localStorage.setItem("conversion-history",JSON.stringify(t)),window.dispatchEvent(new StorageEvent("storage",{key:"conversion-history",newValue:JSON.stringify(t)})),confirm("Successfully uploaded ".concat(e.length," files to history with .md extension!\n\n")+"Click OK to go directly to Step 3 (Generation), or Cancel to stay here.")&&C&&C(3)},size:"lg",className:"min-w-32",children:[(0,a.jsx)(j.Z,{className:"mr-2 h-4 w-4"}),"Upload to History"]}),(0,a.jsx)(m,{onClick:i,disabled:!et(),size:"lg",className:"min-w-48",children:et()?"Files Look Good - Generate Test Cases":"Files Not Converted Yet"})]}):(0,a.jsxs)(a.Fragment,{children:[r&&(0,a.jsxs)(m,{variant:"outline",onClick:Y,size:"lg",className:"min-w-32",children:[(0,a.jsx)(E.Z,{className:"mr-2 h-4 w-4"}),"Cancel"]}),(0,a.jsx)(m,{onClick:K,disabled:r,size:"lg",className:"min-w-48",children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Converting Files..."]}):"Convert All Files"})]})})]})]})}var Y=s(610);function K(e){let{className:t,value:s,...n}=e;return(0,a.jsx)(Y.fC,{"data-slot":"progress",className:c("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...n,children:(0,a.jsx)(Y.z$,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})}var $=s(3276),Q=s(6475),X=s(1641),ee=s(9076);let et=()=>{try{let e=localStorage.getItem("selectedStream");if(console.log("getStreamFromStorage - raw value:",e),e&&"null"!==e&&'""'!==e&&"undefined"!==e){let t=JSON.parse(e);return console.log("getStreamFromStorage - parsed value:",t),t}}catch(e){console.error("Error loading selectedStream from localStorage:",e)}return null},es=e=>{let[t,s]=(0,n.useState)(e);return(0,n.useEffect)(()=>{if(console.log("useEffectiveStream - prop selectedStream:",e),e)s(e);else{let e=et();console.log("useEffectiveStream - from storage:",e),s(e)}},[e]),(0,n.useEffect)(()=>{let e=e=>{if("selectedStream"===e.key){let t=e.newValue;if(t&&"null"!==t&&'""'!==t)try{let e=JSON.parse(t);s(e)}catch(e){console.error("Error parsing selectedStream from storage event:",e)}}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),console.log("useEffectiveStream - returning:",t),t},ea=function(e){let t;if(arguments.length>1&&void 0!==arguments[1]&&arguments[1],!e||"string"!=typeof e)return"Error: No markdown data found or invalid format";let s=e=>{if(!e||"string"!=typeof e)return e;try{let t;let s=/```(?:json)?\s*([\s\S]*?)\s*```/g,a=[],n=0;for(;null!==(t=s.exec(e));){t.index>n&&a.push(e.substring(n,t.index));try{let e=t[1].trim(),s=JSON.parse(e),n=JSON.stringify(s,null,2);a.push("```json\n"+n+"\n```")}catch(e){a.push(t[0])}n=t.index+t[0].length}return n<e.length&&a.push(e.substring(n)),a.length>0?a.join(""):e}catch(t){return e}},a=(e,t)=>{if(!e||"string"!=typeof e)return e;let a=e.replace(/\n+/g," ").replace(/\s+/g," ").trim();return("Data test"===t||"Kết quả mong muốn"===t)&&(a=(a=(a=(a=(a=s(a=a.replace(/```/g,"\n```"))).replace(/Headers:\s*```/g,"Headers:\n```")).replace(/Body:\s*```/g,"\nBody:\n```")).replace(/Status Code:/g,"\nStatus Code:")).replace(/DB:/g,"\nDB:")),a.replace(/"/g,'""')},n=e=>{if(null==e)return"";let t=String(e);return(t.includes('"')||t.includes(",")||t.includes("\n"))&&(t='"'+t.replace(/"/g,'""')+'"'),t},r=/\|(.+?)\|\s*\n\|[-\s:|]+\|\s*\n((?:\|.*\|\s*\n?)+)/g,l=[];for(;null!==(t=r.exec(e));)try{let e=t[1].split("|").map(e=>e.trim()).filter(e=>e.length>0);if(0===e.length)continue;for(let s of t[2].split("\n").map(e=>e.trim()).filter(e=>e.length>0&&e.includes("|"))){let t=s.split("|").map(e=>e.trim()).filter((e,t,s)=>!(0===t&&""===e)&&!(t===s.length-1&&""===e));if(t.length>0&&t.some(e=>e.length>0)){let s={};e.forEach((e,n)=>{let r=t[n]||"",l=a(r,e);s[e]=l}),Object.values(s).some(e=>e&&String(e).length>0)&&l.push(s)}}}catch(e){console.error("Error parsing table:",e);continue}if(0===l.length)return"Error: No valid table data found in markdown";let i=Object.keys(l[0]),o=i.map(e=>n(e)).join(",")+"\n";for(let e of l)o+=i.map(t=>n(e[t])).join(",")+"\n";return o};function en(e){let{effectiveStream:t}=e,[s,r]=(0,n.useState)(t);return(0,n.useEffect)(()=>{t?r(t):r(et())},[t]),(0,a.jsx)(u,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:(0,a.jsx)(p,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-full",children:(0,a.jsx)($.Z,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-blue-900",children:"Selected Test Case Type"}),(0,a.jsx)("p",{className:"text-sm text-blue-700",children:s?"business"===s?"Business Validation Test Cases":"Technical Validation Test Cases":(0,a.jsx)("span",{className:"text-red-600",children:"⚠️ No stream selected - please go back and select a test case type"})})]})]}),s&&(0,a.jsx)(v,{variant:"default",className:"bg-blue-600 text-white",children:"business"===s?"Business":"Validation"})]})})})}var er=s(314);function el(e){let{className:t,children:s,...n}=e;return(0,a.jsxs)(er.fC,{"data-slot":"scroll-area",className:c("relative",t),...n,children:[(0,a.jsx)(er.l_,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:s}),(0,a.jsx)(ei,{}),(0,a.jsx)(er.Ns,{})]})}function ei(e){let{className:t,orientation:s="vertical",...n}=e;return(0,a.jsx)(er.gb,{"data-slot":"scroll-area-scrollbar",orientation:s,className:c("flex touch-none p-px transition-colors select-none","vertical"===s&&"h-full w-2.5 border-l border-l-transparent","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent",t),...n,children:(0,a.jsx)(er.q4,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var eo=s(1723),ec=s(2735),ed=s(5868);function em(e){let{uploadedFiles:t,selectedStream:s,generationResults:n,currentGeneratingIndex:r,isGenerating:l,onModifyFile:i,onRemoveFile:o,onDownloadCSV:c}=e,d=t.filter(e=>e.convertedContent),u=e=>{switch(e){case"pending":return(0,a.jsx)(eo.Z,{className:"h-4 w-4 text-muted-foreground"});case"generating":return(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"});case"completed":return(0,a.jsx)(b.Z,{className:"h-4 w-4 text-green-600"});case"error":return(0,a.jsx)(D.Z,{className:"h-4 w-4 text-red-600"})}},x=e=>{switch(e){case"pending":return"Pending";case"generating":return"Generating...";case"completed":return"Completed";case"error":return"Error"}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"business"===s?"Files for Business Test Generation":"Files for Validation Test Generation"}),"business"===s&&(0,a.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"\uD83D\uDCCB Business Flow Requirements"}),(0,a.jsxs)("div",{className:"grid gap-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-purple-800",children:"\uD83D\uDCCB Business Document:"})," Required (1 file)"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-blue-800",children:"\uD83D\uDD27 Detail API:"})," Required (1 file)"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-green-800",children:"\uD83D\uDD17 API Integration:"})," Optional (multiple files allowed)"]})]})]}),(0,a.jsx)(el,{className:"h-[400px] border rounded-lg p-4",children:(0,a.jsx)("div",{className:"space-y-3",children:"business"===s?n.length>0?(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-card",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(N.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-medium text-sm",children:"Combined Business Test Cases"}),(0,a.jsx)(v,{variant:"secondary",children:"business-flow"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[u(n[0].status),(0,a.jsx)("span",{className:"text-sm",children:x(n[0].status)}),"completed"===n[0].status&&n[0].csvData&&(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>c(n[0]),className:"h-6 w-6 p-0",children:(0,a.jsx)(ec.Z,{className:"h-3 w-3"})})]})]}),n[0].error&&(0,a.jsxs)("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-800",children:["Error: ",n[0].error]}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground space-y-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Business Files:"})," ",d.filter(e=>"business"===e.type).length]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Detail API Files:"})," ",d.filter(e=>"detail-api"===e.type).length]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"API Integration Files:"})," ",d.filter(e=>"api-integration"===e.type).length]})]})]}):(0,a.jsx)(a.Fragment,{children:["business","detail-api","api-integration"].map(e=>{let t=d.filter(t=>t.type===e);return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium text-sm text-muted-foreground",children:"business"===e?"\uD83D\uDCCB Business":"detail-api"===e?"\uD83D\uDD27 Detail API":"\uD83D\uDD17 API Integration"}),t.length>0?t.map(e=>{var t;return(0,a.jsxs)("div",{className:"p-3 border rounded-lg bg-card ml-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(N.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-medium text-sm",children:e.name}),(0,a.jsx)(v,{variant:"secondary",children:e.type})]}),!l&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[i&&(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>i(e.id),className:"h-6 w-6 p-0",title:"Modify file",children:(0,a.jsx)(ed.Z,{className:"h-3 w-3"})}),o&&(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>o(e.id),className:"h-6 w-6 p-0 hover:bg-destructive/10 hover:text-destructive",title:"Remove file",children:(0,a.jsx)(w.Z,{className:"h-3 w-3"})})]})]}),(0,a.jsxs)("div",{className:"mt-1 text-xs text-muted-foreground",children:["Content: ",null===(t=e.convertedContent)||void 0===t?void 0:t.substring(0,100),"..."]})]},e.id)}):(0,a.jsx)("div",{className:"p-3 border border-dashed rounded-lg bg-muted/30 ml-4",children:(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"api-integration"===e?"No files (optional)":"No files (required)"})})]},e)})}):d.map((e,t)=>{var s;let d=n.find(t=>t.fileId===e.id);return(0,a.jsxs)("div",{className:"p-4 border rounded-lg ".concat(r===t&&l?"border-primary bg-primary/5":"bg-card"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(N.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-medium text-sm",children:e.name}),(0,a.jsx)(v,{variant:"secondary",children:e.type})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[!l&&(0,a.jsxs)(a.Fragment,{children:[i&&(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>i(e.id),className:"h-6 w-6 p-0",title:"Modify file",children:(0,a.jsx)(ed.Z,{className:"h-3 w-3"})}),o&&(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>o(e.id),className:"h-6 w-6 p-0 hover:bg-destructive/10 hover:text-destructive",title:"Remove file",children:(0,a.jsx)(w.Z,{className:"h-3 w-3"})})]}),d&&(0,a.jsxs)(a.Fragment,{children:[u(d.status),(0,a.jsx)("span",{className:"text-sm",children:x(d.status)}),"completed"===d.status&&d.csvData&&(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>c(d),className:"h-6 w-6 p-0",title:"Download CSV",children:(0,a.jsx)(ec.Z,{className:"h-3 w-3"})})]})]})]}),(null==d?void 0:d.error)&&(0,a.jsxs)("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-800",children:["Error: ",d.error]}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground",children:["Content: ",null===(s=e.convertedContent)||void 0===s?void 0:s.substring(0,100),"..."]})]},e.id)})})})]})}let eu=n.forwardRef((e,t)=>{let{className:s,type:n,...r}=e;return(0,a.jsx)("input",{type:n,className:c("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...r})});eu.displayName="Input";var ex=s(6394);let ef=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),eg=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(ex.f,{ref:t,className:c(ef(),s),...n})});eg.displayName=ex.f.displayName;var ep=s(2841);let eh=ep.fC;ep.xz;let ev=ep.h_;ep.x8;let eb=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(ep.aV,{ref:t,className:c("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...n})});eb.displayName=ep.aV.displayName;let ej=n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,a.jsxs)(ev,{children:[(0,a.jsx)(eb,{}),(0,a.jsxs)(ep.VY,{ref:t,className:c("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[n,(0,a.jsxs)(ep.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(E.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});ej.displayName=ep.VY.displayName;let eN=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:c("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};eN.displayName="DialogHeader";let ey=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:c("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};ey.displayName="DialogFooter";let ew=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(ep.Dx,{ref:t,className:c("text-lg font-semibold leading-none tracking-tight",s),...n})});ew.displayName=ep.Dx.displayName;let eS=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(ep.dk,{ref:t,className:c("text-sm text-muted-foreground",s),...n})});function eC(e){let{isOpen:t,onClose:s,onConfirm:r,defaultFilename:l,fileSize:i="Unknown",streamType:o,isMultiple:c=!1}=e,[d,u]=(0,n.useState)(l);(0,n.useEffect)(()=>{t&&u(l)},[t,l]);let x=()=>{let e=d.trim();if(e){let t=e.replace(/\.csv$/i,"");r("".concat(t,".csv"))}else r(l);s()};return(0,a.jsx)(eh,{open:t,onOpenChange:s,children:(0,a.jsxs)(ej,{className:"sm:max-w-md",children:[(0,a.jsxs)(eN,{children:[(0,a.jsxs)(ew,{className:"flex items-center space-x-2",children:[(0,a.jsx)(ec.Z,{className:"h-5 w-5 text-primary"}),(0,a.jsx)("span",{children:"Download Test Cases"})]}),(0,a.jsxs)(eS,{children:["Your ","business"===o?"business validation":"technical validation"," test cases are ready to download.",c?" All completed test cases will be combined into a single CSV file.":""," Choose a filename for your CSV file."]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-muted/50 rounded-lg",children:[(0,a.jsx)(N.Z,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("p",{className:"text-sm font-medium",children:[c?"Combined ":"","Test Cases CSV"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:c?"Combined test cases from all files":"business"===o?"Business flow test scenarios":"Technical validation test cases"})]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:i})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(eg,{htmlFor:"filename",children:"Filename"}),(0,a.jsx)(eu,{id:"filename",value:d,onChange:e=>u(e.target.value),onKeyPress:e=>{"Enter"===e.key&&x()},placeholder:"Enter filename...",autoFocus:!0,className:"font-mono"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"The .csv extension will be added automatically"})]})]}),(0,a.jsxs)(ey,{className:"sm:justify-start",children:[(0,a.jsx)(m,{type:"button",variant:"secondary",onClick:s,children:"Cancel"}),(0,a.jsxs)(m,{type:"button",onClick:x,className:"sm:ml-3",children:[(0,a.jsx)(ec.Z,{className:"h-4 w-4 mr-2"}),"Download CSV"]})]})]})})}function ek(e){let{uploadedFiles:t,selectedStream:s,isGenerating:r,onGenerateTestCases:l,onBack:i,onModifyFile:o,onRemoveFile:c,onPickFromHistory:d,onCancelGeneration:h,onGenerateNew:j}=e,[N,y]=(0,n.useState)([]),[w,S]=(0,n.useState)(0),[C,k]=(0,n.useState)(null),[I,T]=(0,n.useState)(!1),[B,R]=(0,n.useState)(null),P=es(s),A=t.filter(e=>e.convertedContent),F=async()=>{if(0===A.length)return;let e=new AbortController;k(e);try{"validation"===P?await Z(e):"business"===P&&await O(e)}catch(e){e instanceof Error&&"AbortError"===e.name?console.log("Generation was cancelled"):console.error("Generation failed:",e)}finally{k(null)}},Z=async e=>{y(A.map(e=>({fileId:e.id,fileName:e.name,status:"pending"}))),S(0);for(let t=0;t<A.length;t++){if(null==e?void 0:e.signal.aborted)throw Error("Generation cancelled");let s=A[t];S(t),y(e=>e.map(e=>e.fileId===s.id?{...e,status:"generating"}:e));try{if(G()){console.log("\uD83D\uDE80 Dev Mode: Mocking validation test generation for ".concat(s.name)),await _(1500);let e="Test Case ID,Description,Input,Expected Output,Priority\nTC001,Valid input test for ".concat(s.name,",Sample input data,Success response,High\nTC002,Invalid input test for ").concat(s.name,",Invalid data,Error response,Medium\nTC003,Edge case test for ").concat(s.name,",Boundary values,Handled gracefully,Low\nTC004,Performance test for ").concat(s.name,",Large dataset,Response within 2s,Medium\nTC005,Security test for ").concat(s.name,",Malformed input,Secure error handling,High");y(t=>t.map(t=>t.fileId===s.id?{...t,status:"completed",csvData:e}:t))}else{let t=await fetch("https://testcase-gen.app.n8n.cloud/webhook/generate-test-validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:s.convertedContent,fileName:s.name,fileType:s.type,stream:P,fileId:s.id}),signal:null==e?void 0:e.signal});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));await z(t,s)}}catch(e){if(e instanceof Error&&"AbortError"===e.name)throw Error("Validation test case generation cancelled by user");console.error("Generation failed for file:",s.name,e),y(t=>t.map(t=>t.fileId===s.id?{...t,status:"error",error:e instanceof Error?e.message:"Unknown error"}:t))}}S(-1)},O=async e=>{let t=A.find(e=>"business"===e.type),s=A.find(e=>"detail-api"===e.type),a=A.filter(e=>"api-integration"===e.type);if(!t||!s){alert("Business flow requires both Business Document and Detail API files.");return}if(null==e?void 0:e.signal.aborted)throw Error("Generation cancelled");let n={fileId:"business-combined",fileName:"Business Test Cases",status:"pending"};y([n]),S(0),y([{...n,status:"generating"}]);try{if(G())console.log("\uD83D\uDE80 Dev Mode: Mocking business test generation"),await _(2e3),y([{fileId:"business-combined",fileName:"Business Test Cases",status:"completed",csvData:"Test Case ID,Business Scenario,Test Steps,Expected Result,Priority\nBTC001,User registration flow,1. Fill registration form 2. Submit form 3. Verify email,User registered successfully,High\nBTC002,Product purchase flow,1. Add item to cart 2. Proceed to checkout 3. Complete payment,Order placed successfully,High\nBTC003,Invalid payment method,1. Select invalid payment 2. Attempt purchase,Payment error displayed,Medium\nBTC004,Cart abandonment,1. Add items to cart 2. Leave without purchase,Cart items preserved for 24h,Low\nBTC005,Customer support contact,1. Navigate to help 2. Submit contact form,Support ticket created,Medium"}]);else{let n=a.map(e=>e.convertedContent).join("\n\n"),r={business:"".concat(t.convertedContent),detailApi:"".concat(s.convertedContent),apiIntegration:"".concat(n)},l=await fetch("https://testcase-gen.app.n8n.cloud/webhook/gen-test-case-bussiness",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),signal:null==e?void 0:e.signal});if(!l.ok)throw Error("HTTP error! status: ".concat(l.status));await M(l)}}catch(e){if(e instanceof Error&&"AbortError"===e.name)throw Error("Business test case generation cancelled by user");console.error("Business test case generation failed:",e),y([{...n,status:"error",error:e instanceof Error?e.message:"Unknown error"}])}S(-1)},z=async(e,t)=>{let s=e.headers.get("content-type");if(s&&(s.includes("text/csv")||s.includes("application/octet-stream"))){let s=await e.arrayBuffer(),a=new TextDecoder("utf-8").decode(s);y(e=>e.map(e=>e.fileId===t.id?{...e,status:"completed",csvData:a}:e))}else{let s=await e.json(),a="";if(s.csv)a=s.csv;else if(Array.isArray(s)&&s.length>0&&s[0].md)a=ea(s[0].md,s[0]["file name"]||t.name);else if(s.csvData)a=s.csvData;else if(s.data)a=s.data;else if(s.file){if("string"==typeof s.file)try{a=atob(s.file)}catch(e){a=s.file}else a="Test case generation completed"}else a="Test case generation completed";y(e=>e.map(e=>e.fileId===t.id?{...e,status:"completed",csvData:a}:e))}},M=async e=>{let t=e.headers.get("content-type");if(t&&(t.includes("text/csv")||t.includes("application/octet-stream"))){let t=await e.arrayBuffer();y([{fileId:"business-combined",fileName:"Business Test Cases",status:"completed",csvData:new TextDecoder("utf-8").decode(t)}])}else{let t=await e.json(),s="";if(t.csv)s=t.csv;else if(Array.isArray(t)&&t.length>0&&t[0].md)s=ea(t[0].md,t[0]["file name"]||"Business Test Cases");else if(t.csvData)s=t.csvData;else if(t.data)s=t.data;else if(t.file){if("string"==typeof t.file)try{s=atob(t.file)}catch(e){s=t.file}else s="Business test case generation completed"}else s=t.md?ea(t.md,"Business Test Cases"):"string"==typeof t&&t.includes("|")?ea(t,"Business Test Cases"):"Business test case generation completed";y([{fileId:"business-combined",fileName:"Business Test Cases",status:"completed",csvData:s}])}},U=N.length>0?N.filter(e=>"completed"===e.status||"error"===e.status).length/N.length*100:0,L=N.filter(e=>"completed"===e.status).length;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(en,{effectiveStream:P}),(0,a.jsxs)(u,{children:[(0,a.jsxs)(x,{children:[(0,a.jsxs)(f,{className:"flex items-center space-x-2",children:[(0,a.jsx)($.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Generate Test Cases"}),P&&(0,a.jsx)(v,{variant:"outline",className:"ml-2",children:"business"===P?"Business Validation":"Technical Validation"})]}),(0,a.jsx)(g,{children:"Generate comprehensive test cases from your converted markdown files"})]}),(0,a.jsxs)(p,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:A.length}),(0,a.jsx)("div",{className:"text-sm text-blue-800",children:"Files Ready"})]}),(0,a.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:L}),(0,a.jsx)("div",{className:"text-sm text-green-800",children:"Completed"})]}),(0,a.jsxs)("div",{className:"p-4 bg-orange-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:N.filter(e=>"error"===e.status).length}),(0,a.jsx)("div",{className:"text-sm text-orange-800",children:"Errors"})]})]}),N.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Generation Progress"}),(0,a.jsxs)("span",{children:[Math.round(U),"%"]})]}),(0,a.jsx)(K,{value:U,className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-sm font-medium",children:"File Management"}),(0,a.jsx)("div",{className:"flex space-x-2",children:d&&(0,a.jsxs)(m,{onClick:d,variant:"outline",size:"sm",disabled:r,children:[(0,a.jsx)(Q.Z,{className:"h-4 w-4 mr-2"}),"Pick from History"]})})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)(m,{onClick:F,disabled:!P||0===A.length||r||"business"===P&&(!A.find(e=>"business"===e.type)||!A.find(e=>"detail-api"===e.type)),className:"flex-1",children:P?r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating ","business"===P?"Business":"Validation"," Test Cases..."]}):"business"===P?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)($.Z,{className:"h-4 w-4 mr-2"}),"Generate Business Test Cases (",A.length," files)"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)($.Z,{className:"h-4 w-4 mr-2"}),"Generate Validation Test Cases (",A.length," files)"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D.Z,{className:"h-4 w-4 mr-2"}),"No Test Case Type Selected"]})}),r&&(0,a.jsxs)(m,{onClick:()=>{window.confirm("Are you sure you want to cancel the ".concat("business"===P?"business":"validation"," test case generation?"))&&C&&(C.abort(),k(null),y(e=>e.map(e=>"generating"===e.status||"pending"===e.status?{...e,status:"error",error:"Cancelled by user"}:e)),S(-1),null==h||h())},variant:"destructive",size:"default",className:"min-w-[120px]",children:[(0,a.jsx)(X.Z,{className:"h-4 w-4 mr-2"}),"Cancel"]})]}),r&&(0,a.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:["Generating ","business"===s?"Business":"Validation"," Test Cases"]})]}),(0,a.jsxs)(m,{onClick:()=>{C&&(C.abort(),k(null),y(e=>e.map(e=>"generating"===e.status||"pending"===e.status?{...e,status:"error",error:"Cancelled by user"}:e)),S(-1),null==h||h())},variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:[(0,a.jsx)(E.Z,{className:"h-3 w-3 mr-1"}),"Stop"]})]}),(0,a.jsx)("div",{className:"mt-2 text-xs text-blue-700",children:"business"===s?"Processing combined business flow...":"Processing file ".concat(w+1," of ").concat(A.length,"...")})]})]}),"business"===P&&(!A.find(e=>"business"===e.type)||!A.find(e=>"detail-api"===e.type))&&(0,a.jsx)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,a.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,a.jsx)("strong",{children:"⚠️ Missing Required Files:"}),(0,a.jsxs)("ul",{className:"mt-1 ml-4 list-disc",children:[!A.find(e=>"business"===e.type)&&(0,a.jsx)("li",{children:"Business Document is required"}),!A.find(e=>"detail-api"===e.type)&&(0,a.jsx)("li",{children:"Detail API Document is required"})]})]})}),(0,a.jsx)(em,{uploadedFiles:t,selectedStream:s,generationResults:N,currentGeneratingIndex:w,isGenerating:r,onModifyFile:o,onRemoveFile:c,onDownloadCSV:e=>{e.csvData&&(R(e),T(!0))}}),(0,a.jsxs)("div",{className:"flex justify-between pt-4 border-t",children:[(0,a.jsx)(m,{variant:"outline",onClick:i,disabled:r,children:"Back to Review"}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:("validation"===P&&L===A.length&&A.length>0||"business"===P&&1===L&&A.length>0)&&!r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"text-sm text-green-600 flex items-center",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-1"}),"All test cases generated successfully!"]}),j&&(0,a.jsxs)(m,{onClick:j,variant:"default",className:"bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(ee.Z,{className:"h-4 w-4 mr-2"}),"Generate New Test Case"]})]})})]})]})]}),(0,a.jsx)(eC,{isOpen:I,onClose:()=>T(!1),onConfirm:e=>{if(!(null==B?void 0:B.csvData))return;let t=new Blob([B.csvData],{type:"text/csv"}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s),R(null)},defaultFilename:B?(e=>{let t="business"===P?"business":"validation",s=new Date().toISOString().split("T")[0],a=e.fileName.replace(".md","").replace(/[^a-zA-Z0-9_-]/g,"_");return"".concat(a,"_").concat(t,"_testcases_").concat(s,".csv")})(B):"test_cases.csv",fileSize:(null==B?void 0:B.csvData)?(e=>{let t=new Blob([e]).size;return t<1024?"".concat(t," B"):t<1048576?"".concat((t/1024).toFixed(1)," KB"):"".concat((t/1048576).toFixed(1)," MB")})(B.csvData):"Unknown",streamType:P})]})}function eD(e){let{steps:t,currentStep:s}=e;return(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:t.map((e,n)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:c("w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium transition-colors",s>=e.number?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:e.number}),(0,a.jsxs)("div",{className:"mt-2 text-center",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-foreground",children:e.title}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description})]})]}),n<t.length-1&&(0,a.jsx)("div",{className:c("flex-1 h-0.5 mx-4 transition-colors",s>e.number?"bg-primary":"bg-border")})]},e.number))})})}eS.displayName=ep.dk.displayName;var eI=s(7117),eT=s(8906),eE=s(6858);let eB=[{type:"business",title:"Business Test Cases",description:"Generate comprehensive business test cases from business documents, API details, and integration specs",icon:eI.Z,color:"bg-blue-50 border-blue-200 hover:bg-blue-100",badgeColor:"bg-blue-100 text-blue-800",features:["Business document analysis","API detail testing","Integration testing","Multi-document workflow"],requirements:{files:"1-3 files required",types:[{name:"\uD83D\uDCCB Business Requirements",required:!0,description:"Main specification document"},{name:"\uD83D\uDD27 Technical Specifications",required:!0,description:"API documentation and endpoints"},{name:"\uD83D\uDD17 Integration Guides",required:!1,description:"System integration docs (optional, multiple allowed)"}]},workflow:"Multi-document → Convert → Generate business test cases",idealFor:"Complex business applications with multiple APIs and integrations"},{type:"validation",title:"Validation Test Cases",description:"Generate validation test cases from a single document for data validation and input verification",icon:eT.Z,color:"bg-green-50 border-green-200 hover:bg-green-100",badgeColor:"bg-green-100 text-green-800",features:["Single file validation","Input verification","Data integrity checks","Quick validation testing"],requirements:{files:"1 file only",types:[{name:"✅ Validation Document",required:!0,description:"Any document for validation testing"}]},workflow:"Single document → Convert → Generate validation test cases",idealFor:"Simple validation scenarios and input verification testing"}];function eR(e){let{onStreamSelected:t,selectedStream:s}=e;return(0,a.jsxs)(u,{children:[(0,a.jsxs)(x,{className:"text-center",children:[(0,a.jsx)(f,{children:"Select Test Case Stream"}),(0,a.jsx)(g,{children:"Choose the type of test cases you want to generate from your HTML documents"})]}),(0,a.jsxs)(p,{className:"space-y-6",children:[(0,a.jsx)("div",{className:"grid md:grid-cols-2 gap-6",children:eB.map(e=>{let n=e.icon,r=s===e.type;return(0,a.jsxs)("div",{className:c("relative border-2 rounded-lg p-6 cursor-pointer transition-all",e.color,r&&"ring-2 ring-primary ring-offset-2"),onClick:()=>t(e.type),children:[(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(n,{className:"h-8 w-8 text-primary"})}),(0,a.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:e.title}),(0,a.jsx)(v,{variant:"secondary",className:e.badgeColor,children:e.type.charAt(0).toUpperCase()+e.type.slice(1)})]}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:e.description}),(0,a.jsxs)("div",{className:"bg-white/50 rounded-md p-3 space-y-2",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-gray-700",children:"File Requirements:"}),(0,a.jsx)("div",{className:"text-xs text-blue-600 font-medium",children:e.requirements.files}),(0,a.jsx)("div",{className:"space-y-1",children:e.requirements.types.map((e,t)=>(0,a.jsxs)("div",{className:"text-xs text-gray-600 flex items-center",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-primary rounded-full mr-2 flex-shrink-0"}),(0,a.jsx)("span",{className:"font-medium",children:e.name}),e.required&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"}),(0,a.jsxs)("span",{className:"ml-2 text-gray-500",children:["- ",e.description]})]},t))})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-md p-2",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-gray-700 mb-1",children:"Workflow:"}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:e.workflow})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:"Best for:"})," ",e.idealFor]}),(0,a.jsx)("ul",{className:"space-y-1",children:e.features.map((e,t)=>(0,a.jsxs)("li",{className:"text-sm text-muted-foreground flex items-center",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-primary rounded-full mr-2"}),e]},t))})]})]}),r&&(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsx)("div",{className:"w-6 h-6 bg-primary rounded-full flex items-center justify-center",children:(0,a.jsx)(eE.Z,{className:"h-3 w-3 text-primary-foreground"})})})]},e.type)})}),s&&(0,a.jsx)("div",{className:"flex justify-center pt-4",children:(0,a.jsxs)(m,{onClick:()=>t(s),className:"min-w-40",children:["Continue with ",s.charAt(0).toUpperCase()+s.slice(1)," Stream",(0,a.jsx)(eE.Z,{className:"ml-2 h-4 w-4"})]})})]})]})}var eP=s(1047);function eA(e){let{onSelectHistoryItem:t}=e,[s,r]=(0,n.useState)([]),[l,i]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=()=>{try{let e=localStorage.getItem("conversion-history");if(e){let t=JSON.parse(e);r(t)}}catch(e){console.error("Error loading history:",e)}};e();let t=t=>{"conversion-history"===t.key&&e()};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[]);let o=e=>{i(e.id),null==t||t(e)},c=e=>{if(e.isTestCase&&e.csvData){let t=prompt("Enter filename for ".concat(e.fileName,":"),e.fileName.replace(".csv","")+".csv");if(t){let s=t.endsWith(".csv")?t:t+".csv",a=new Blob([e.csvData],{type:"text/csv"}),n=window.URL.createObjectURL(a),r=document.createElement("a");r.href=n,r.download=s,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)}}else{let t=new Blob([e.content],{type:"text/markdown"}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=e.fileName,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s)}},d=e=>{let t=s.filter(t=>t.id!==e);r(t),localStorage.setItem("conversion-history",JSON.stringify(t)),window.dispatchEvent(new StorageEvent("storage",{key:"conversion-history",newValue:JSON.stringify(t)})),l===e&&i(null)},h=e=>new Date(e).toLocaleString(),b=e=>{switch(e){case"api-design":return"bg-blue-100 text-blue-800";case"api-detail":return"bg-green-100 text-green-800";case"scenario":return"bg-purple-100 text-purple-800";case"error":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},j=e=>{switch(e){case"api-design":return"API Design";case"api-detail":return"API Detail";case"scenario":return"Business Scenario";case"error":return"Error";default:return"Document"}};return(0,a.jsxs)(u,{className:"h-full flex flex-col",children:[(0,a.jsxs)(x,{className:"pb-3 flex-shrink-0",children:[(0,a.jsx)(f,{className:"text-base",children:"Conversion History"}),(0,a.jsx)(g,{className:"text-sm",children:"Markdown files from your conversions"})]}),(0,a.jsx)(p,{className:"p-0 flex-1 overflow-hidden",children:(0,a.jsx)(el,{className:"h-full",children:(0,a.jsx)("div",{className:"space-y-2 p-3",children:0===s.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(N.Z,{className:"mx-auto h-8 w-8 text-muted-foreground mb-2"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No conversion history yet"})]}):s.sort((e,t)=>t.timestamp-e.timestamp).map(e=>(0,a.jsxs)("div",{className:"p-2 border rounded-lg transition-colors cursor-pointer ".concat(l===e.id?"border-primary bg-primary/5":"hover:bg-muted/50"),onClick:()=>o(e),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 min-w-0 flex-1",children:[(0,a.jsx)(N.Z,{className:"h-3 w-3 text-muted-foreground flex-shrink-0"}),(0,a.jsx)(v,{variant:"secondary",className:"".concat(b(e.type)," text-xs px-1 py-0 h-5"),children:j(e.type)})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),c(e)},className:"h-5 w-5 p-0",title:"Download test cases",children:(0,a.jsx)(ec.Z,{className:"h-3 w-3"})}),(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),d(e.id)},className:"h-5 w-5 p-0 hover:bg-destructive/10 hover:text-destructive",children:(0,a.jsx)(w.Z,{className:"h-3 w-3"})})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-muted-foreground",children:[(0,a.jsx)(eP.Z,{className:"h-3 w-3 flex-shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:h(e.timestamp)})]}),(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("p",{className:"font-medium text-xs break-words leading-tight",title:e.fileName,style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:"1.3",wordBreak:"break-all"},children:e.fileName}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1 break-words",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:"1.3"},children:e.content.length>80?"".concat(e.content.substring(0,80),"..."):e.content})]})]})]},e.id))})})})]})}var eF=s(1239),eZ=s(8728);function eO(){let[e,t]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{t(G())},[]),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(m,{variant:e?"default":"outline",size:"sm",onClick:()=>{let e=q();t(e),e?console.log("\uD83D\uDE80 Development mode enabled - API calls will be mocked"):console.log("\uD83D\uDCE1 Development mode disabled - Real API calls will be made")},className:"flex items-center space-x-2 ".concat(e?"bg-orange-600 hover:bg-orange-700 text-white":"hover:bg-orange-50"),children:[e?(0,a.jsx)(eF.Z,{className:"h-4 w-4"}):(0,a.jsx)(eZ.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:e?"Dev Mode":"Production"})]}),e&&(0,a.jsx)(v,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:"Mock APIs"})]})}var ez=s(2451),eM=s(407),eU=s(4438);function eL(){let[e,t]=B("currentStep",0),[s,r]=B("selectedStream",null),[l,i]=B("uploadedFiles",[]),[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),[x,f]=(0,n.useState)(!1),[g,p]=(0,n.useState)(!0),[h,v]=(0,n.useState)(null);(0,n.useEffect)(()=>{c(!0);{console.log("=== Hydration Debug ===");let a=localStorage.getItem("selectedStream"),n=localStorage.getItem("currentStep");if(console.log("Raw localStorage - selectedStream:",a),console.log("Raw localStorage - currentStep:",n),a&&"null"!==a&&'""'!==a&&"undefined"!==a)try{let e=JSON.parse(a);console.log("Parsed selectedStream from localStorage:",e),s&&s===e||(console.log("Updating selectedStream from localStorage:",e),r(e))}catch(e){console.error("Error parsing selectedStream from localStorage:",e)}if(n&&"null"!==n)try{let s=parseInt(n);console.log("Parsed currentStep from localStorage:",s),e!==s&&(console.log("Updating currentStep from localStorage:",s),t(s))}catch(e){console.error("Error parsing currentStep from localStorage:",e)}console.log("=== End Hydration Debug ===")}},[]),(0,n.useEffect)(()=>{s&&l.length>0&&j()},[e,s,l.length]),(0,n.useEffect)(()=>{if(2===e&&s&&l.length>0){let e=setTimeout(()=>{j()},100);return()=>clearTimeout(e)}},[e,s]),(0,n.useEffect)(()=>{if(3===e){if(console.log("Entering step 3, checking for history data..."),console.log("Current selectedStream:",s),!s){console.log("selectedStream is null, attempting to load from localStorage...");let e=localStorage.getItem("selectedStream");if(e)try{let t=JSON.parse(e);console.log("Loaded selectedStream from localStorage:",t),r(t)}catch(e){console.error("Error parsing selectedStream from localStorage:",e)}}if("true"===localStorage.getItem("usingHistoryData")){console.log("Loading files from localStorage for history data...");try{let e=localStorage.getItem("uploadedFiles");if(e){let t=JSON.parse(e);console.log("Parsed files from localStorage:",t),i(t)}}catch(e){console.error("Error loading files from localStorage:",e)}localStorage.removeItem("usingHistoryData")}}},[e]);let b=e=>{i(e),localStorage.setItem("uploadedFiles",JSON.stringify(e))},j=()=>{if(s)try{let e="conversion-data-".concat(s),t=localStorage.getItem(e);if(t){let e=JSON.parse(t);if(e.statuses&&e.statuses.length>0){let t=!1,s=l.map(s=>{let a=e.statuses.find(e=>e.fileId===s.id);return a&&"completed"===a.status&&a.markdownResult&&s.convertedContent!==a.markdownResult?(t=!0,{...s,convertedContent:a.markdownResult}):s});t&&(console.log("Syncing converted content from localStorage:",s.filter(e=>e.convertedContent).length,"files"),b(s))}}}catch(e){console.error("Error syncing converted content:",e)}},N=async e=>{if(s){u(!0);try{let t=l.find(t=>t.id===e);if(!t){console.error("File not found for regeneration:",e);return}let a="conversion-data-".concat(s),n=localStorage.getItem(a),r={statuses:[],currentIndex:0};n&&(r=JSON.parse(n)),r.statuses=r.statuses.map(t=>t.fileId===e?{...t,status:"converting",error:void 0}:t),localStorage.setItem(a,JSON.stringify(r));let o="Regeneration completed";if(G())console.log("\uD83D\uDE80 Dev Mode: Mocking regeneration for ".concat(t.name)),await _(1200),o=J(t.name,t.type,s)+"\n\n---\n*Regenerated at ".concat(new Date().toLocaleTimeString(),"*");else{let e=await fetch("https://testcase-gen.app.n8n.cloud/webhook/html-to-md",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t.content,fileName:t.name,fileType:t.type,stream:s})});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let a=await e.json();if("success"===a.status&&a.files&&a.files.length>0){let e=a.files[0].data;if(e)try{let t=atob(e),s=new Uint8Array(t.length);for(let e=0;e<t.length;e++)s[e]=t.charCodeAt(e);o=new TextDecoder("utf-8").decode(s)}catch(t){console.error("Base64 decode error:",t),o=e}}else o=J(t.name,t.type,s)}r.statuses=r.statuses.map(t=>t.fileId===e?{...t,status:"completed",markdownResult:o,error:void 0}:t),localStorage.setItem(a,JSON.stringify(r));let c=l.map(t=>t.id===e?{...t,convertedContent:o}:t);i(c)}catch(n){console.error("Regeneration failed:",n);let t="conversion-data-".concat(s),a=localStorage.getItem(t);if(a){let s=JSON.parse(a);s.statuses=s.statuses.map(t=>t.fileId===e?{...t,status:"error",error:n instanceof Error?n.message:"Unknown error"}:t),localStorage.setItem(t,JSON.stringify(s))}}finally{u(!1)}}},y=e=>{if(i(l.filter(t=>t.id!==e)),s){let t="conversion-data-".concat(s);try{let s=localStorage.getItem(t);if(s){let a=JSON.parse(s);a.statuses&&(a.statuses=a.statuses.filter(t=>t.fileId!==e),localStorage.setItem(t,JSON.stringify(a)))}}catch(e){console.error("Error cleaning up conversion data:",e)}}},w=async()=>{f(!0),console.log("Generating ".concat(s," test cases...")),await new Promise(e=>setTimeout(e,3e3)),f(!1)};return(0,a.jsx)("div",{className:"min-h-screen bg-background",children:(0,a.jsxs)("div",{className:"flex h-screen",children:[(0,a.jsxs)("div",{className:"transition-all duration-300 ".concat(g?"w-80":"w-12"," border-r bg-background flex flex-col"),children:[(0,a.jsx)("div",{className:"p-4 border-b flex-shrink-0",children:(0,a.jsxs)(m,{variant:"ghost",size:"sm",onClick:()=>p(!g),className:"w-full justify-start",children:[g?(0,a.jsx)(ez.Z,{className:"h-4 w-4 mr-2"}):(0,a.jsx)(eM.Z,{className:"h-4 w-4"}),g&&"Hide History"]})}),g&&(0,a.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,a.jsx)(eA,{onSelectHistoryItem:e=>{v(e)}})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsx)("header",{className:"text-center mb-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Test Case Generator"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Choose your test case stream and convert HTML documents to generate comprehensive test cases"})]}),(0,a.jsx)("div",{className:"flex-1 flex justify-end",children:(0,a.jsx)(eO,{})})]})}),o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eD,{steps:[{number:0,title:"Select Stream",description:"Choose test case type"},{number:1,title:"Upload Files",description:"Upload HTML documents"},{number:2,title:"Convert & Review",description:"Convert to Markdown and review"},{number:3,title:"Generate",description:"Generate test cases"}],currentStep:e}),(0,a.jsxs)("div",{className:"mt-8",children:[0===e&&(0,a.jsx)(eR,{onStreamSelected:e=>{console.log("handleStreamSelected - setting stream:",e),r(e),t(1),localStorage.setItem("selectedStream",JSON.stringify(e)),localStorage.setItem("currentStep","1"),console.log("handleStreamSelected - persisted to localStorage:",localStorage.getItem("selectedStream"))},selectedStream:s}),1===e&&(0,a.jsx)(k,{onFilesUploaded:e=>{i(e)},onNext:()=>t(2),onBack:()=>{r(null),t(0),localStorage.removeItem("selectedStream"),localStorage.setItem("currentStep","0"),localStorage.removeItem("uploadedFiles")},uploadedFiles:l,selectedStream:s,onDeleteFile:y}),2===e&&(0,a.jsx)(W,{uploadedFiles:l,isConverting:d,setIsConverting:u,onConvert:()=>{j(),t(3),localStorage.setItem("currentStep","3")},onBack:()=>{t(1),localStorage.setItem("currentStep","1")},selectedStream:s,onDeleteFile:y,onRegenerate:N,onUpdateFiles:b,onNavigateToStep:e=>{t(e),localStorage.setItem("currentStep",e.toString())}}),3===e&&(0,a.jsx)(ek,{uploadedFiles:l,selectedStream:s,isGenerating:x,onGenerateTestCases:w,onBack:()=>{t(2),localStorage.setItem("currentStep","2")},onGenerateNew:()=>{r(null),t(0),i([]),u(!1),f(!1),v(null),localStorage.removeItem("selectedStream"),localStorage.removeItem("currentStep"),localStorage.removeItem("uploadedFiles"),localStorage.removeItem("usingHistoryData"),localStorage.setItem("currentStep","0"),eU.Am.success("Ready to generate new test cases!")}})]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})]})})})]})})}}},function(e){e.O(0,[301,971,117,744],function(){return e(e.s=5047)}),_N_E=e.O()}]);